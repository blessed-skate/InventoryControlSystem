package mx.com.icsp.util.pdf;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.swing.ImageIcon;

import mx.com.icsc.common.Asset;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.data.JRBeanCollectionDataSource;
import net.sf.jasperreports.view.JasperViewer;

public class PdfReport {
	public void main(String[] args) {
        try {
            Map<String, Object> parameters = new HashMap<String, Object>();
            JRBeanCollectionDataSource dataSource;
            dataSource = new JRBeanCollectionDataSource(getObjetos());

            ImageIcon img = new ImageIcon("E:\\Documents and Settings\\HROJASAL\\Mis documentos\\Mis im√°genes\\iusacell_logo.JPG");
            parameters.put("image", img.getImage());

            //Datos de la cuenta
            parameters.put("cuenta", "5.12357");
            parameters.put("factura", "144422");
            parameters.put("fecha_emision", "hoy");
            parameters.put("lugar_emision", "Puebla");
            parameters.put("rfc", "ROAH860109");

            //Direccion del cliente
            parameters.put("linea1", "Camino real a momoxpan");
            parameters.put("linea2", "no. 2424 int. 47");
            parameters.put("linea3", "Residencial San Pedro");
            parameters.put("linea4", "San Pedro Cholula");
            parameters.put("linea5", "Puebla");
            parameters.put("linea6", "C.P. 72760");

            parameters.put("subtotal", "212");
            parameters.put("iva", "12121");
            parameters.put("ivaPorcentaje", "16%");
            parameters.put("total", "21.22");
            parameters.put("totalLetra", "**********************CIENTO DIECISEIS PESOS 00/100 M.N.**********************");

            parameters.put("fecha_aut", "hoy");
            parameters.put("num_aprobacion", "323");

            parameters.put("sello", "RLm49gNyrkjwgui0oOt+vcUEyBLpXdRIkRCB8W7xkek6pRd6Zu3TzmQ73fVRy0eU4HNRGCI5N205zTAWq7MKpnEOZZ1BkrQHTFXO2JMmq+DWl0ADCvqMJZdE88X9vHUalPdityEOwwxRBFLSbvKyJ4RZ06Ayl7xtiftNEJ8D07k=");
            parameters.put("cadena_original", "||2.0|AAD|30|2010-04-06T09:57:35|53190|2010|ingreso|Pago en una sola exhibicion|CONTADO|100|116|IUS890616RH6|IUSACELL S.A. DE C.V|MONTES URALES|460|LOMAS DE CHAPULTEPEC|DISTRITOFEDERAL|MIGUEL HIDALGO|D.F|MEXICO|11000|RVE0210179M5|REAL DE VENTAS, S.A. DE C.V.|88630 REYNOSA TAMAULIPAS|0000|BETY|88630 REYNOSA TAMAULIPAS|88630 REYNOSA TAMAULIPAS|MEXICO|88630|1|NOTIENE|100|100|IVA|16|16.00|INTERFACTURA SAPI DE CV|INT020124V62|00001000000001991954|2007-08-02T18:00:00|74592||");
            parameters.put("certificado", "00001100000200000154");

            JasperReport report = JasperCompileManager.compileReport("E:\\facturaEspecial_test_2.jrxml");
            this.getCl

            JasperPrint print = JasperFillManager.fillReport(report, parameters, dataSource);


            //JasperExportManager.exportReportToPdfFile(print, "E://test.pdf");
            JasperViewer.viewReport(print, false);

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public static Collection<Asset> getObjetos() {
    	
        List<Asset> list = new ArrayList<Asset>();
        for (int i = 0; i < 80; i++) {
            Asset obj = new Asset();
            obj.setId(1);
            obj.setDescription("Test "+1);
            obj.setPrice((float) (Math.random() * 20));
            obj.setUseDate(new Date());
            list.add(obj);
        }
        return list;
    }
}
