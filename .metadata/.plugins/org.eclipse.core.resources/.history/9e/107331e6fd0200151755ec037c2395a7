package mx.com.icsp.persistence.dao;

import java.util.List;
import java.util.Map;

import mx.com.icsc.common.User;

import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Options;
import org.apache.ibatis.annotations.Result;
import org.apache.ibatis.annotations.Results;
import org.apache.ibatis.mapping.StatementType;

public interface UserDao {
	
//	String OPER_GET_AVATARBYLEVEL = "CALL SCSMPT360.SPSMPSELAVATARBYLEVEL  ("
//			+ "#{level, mode=IN, jdbcType=INTEGER}, "
//			+ "#{blocked, mode=IN, jdbcType=INTEGER}, "
//			+ "#{CUR1, mode=OUT, jdbcType=CURSOR, javaType=java.sql.ResultSet, resultMap=getAvatars} )";

//	static final String SPCISSELUSER = "{CALL CISDB.SPCISSELUSER("
//			+ "#{username, mode=IN, jdbcType=VARCHAR}"			 
//			+ ")}";
	
	static final String SPCISSELUSER = "SELECT FIIDUSER 'id', fcusername username, fcauthority authority, fcenabled enabled, fcname 'name', fclastname lastname, fcsex sex, fdbirth birth, fdregisterdate registerdate, fdlastupdate lastupdate
"FROM cisdb.tacisuser"+
"WHERE fcusername ="+
			+ "#{username}";
	
	@Insert(SPCISSELUSER)
	@Options(statementType = StatementType.CALLABLE)
	@Results(value = {
			@Result(property="id", column="state_id"),
			@Result(property="username", column="username"),
			@Result(property="authority", column="authority"),
			@Result(property="enabled", column="enabled")
			})
//	@ResultMap(value={"mx.com.icsc.common.User"})
	public abstract User getUser(Map<String, Object> params);

}
